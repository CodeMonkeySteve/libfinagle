Name: libFinagle
Version: @FINAGLE_VERSION@
Release: @FINAGLE_RELEASE@

Summary: Finagle C++ convenience/wrapper library.
License: LGPL
Group: Development/Libraries
#Url:
Source: %{name}-@FINAGLE_VERSION@-@FINAGLE_RELEASE@.tar.bz2

Requires: expat

BuildRoot: %(mktemp -ud %{_tmppath}/%{name}-%{version}-%{release}-XXXXXX)
BuildRequires: expat-devel uuid-devel

%description
Finagle is a C++ library providing wrapper classes and convenience
functions for many common system functions, including:
* Multi-threading (pthreads)
* Regular expressions (pcre)
* XML parsing (expat)
* TCP/UNIX network (sockets)
* Signal/slot messaing (sigslot)
* Reference-counting smart-pointers


%prep
%setup -q -n %{name}-%{version}-%{release}


%build
%configure --enable-doxygen
make %{?_smp_mflags}
make check


%install
rm -rf %{buildroot}
make install DESTDIR=%{buildroot}
rm -f %{buildroot}/%{_libdir}/*.la


%clean
rm -rf %{buildroot}


%files
%defattr(-,root,root,-)
%{_libdir}/%{name}*.so.*
%doc AUTHORS COPYING

%post
/sbin/ldconfig

%postun
/sbin/ldconfig

###############################################################################

%package devel
Summary: Static libraries and header files for libFinagle app development.
Group: Development/Libraries
Requires: %name = %version

%description devel
This package contains the static libraries and headers necessary for developing
programs that use libFinagle.

%files devel
%defattr(-,root,root,-)
%{_libdir}/%{name}*.so
%{_libdir}/%{name}*.a
%{_libdir}/pkgconfig/%{name}.pc
%{_includedir}/%{name}-%{version}-%{release}
%doc doc/*
